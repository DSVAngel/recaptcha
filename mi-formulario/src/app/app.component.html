
<div class="container">
  <div class="card">

    <div class="header">
      <h1>Formulario de Contacto Seguro</h1>
      <p>Completa todos los campos para enviarnos tu mensaje</p>
    </div>

    <!-- Alert -->
    <div *ngIf="submitStatus" [class]="'alert alert-' + submitStatus.type">
      <span class="alert-icon">{{ submitStatus.type === 'success' ? '‚úì' : '‚ö†' }}</span>
      <span>{{ submitStatus.message }}</span>
    </div>

    <!-- Formulario -->
    <div [formGroup]="contactForm" class="form">

      <!-- Nombre -->
      <div class="form-group">
        <label for="name" class="label">Nombre completo *</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          [class]="getFieldClass('name')"
          placeholder="Ej: Juan P√©rez"
          maxlength="100"
        />
        <p *ngIf="hasError('name')" class="error-text">
          ‚ö† {{ getErrorMessage('name') }}
        </p>
      </div>

      <!-- Email y Tel√©fono -->
      <div class="form-row">
        <div class="form-group">
          <label for="email" class="label">Email *</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            [class]="getFieldClass('email')"
            placeholder="tu@email.com"
            maxlength="100"
          />
          <p *ngIf="hasError('email')" class="error-text">
            ‚ö† {{ getErrorMessage('email') }}
          </p>
        </div>

        <div class="form-group">
          <label for="phone" class="label">Tel√©fono *</label>
          <input
            type="tel"
            id="phone"
            formControlName="phone"
            [class]="getFieldClass('phone')"
            placeholder="+52 123 456 7890"
            maxlength="20"
          />
          <p *ngIf="hasError('phone')" class="error-text">
            ‚ö† {{ getErrorMessage('phone') }}
          </p>
        </div>
      </div>

      <!-- Asunto -->
      <div class="form-group">
        <label for="subject" class="label">Asunto *</label>
        <input
          type="text"
          id="subject"
          formControlName="subject"
          [class]="getFieldClass('subject')"
          placeholder="Ej: Consulta sobre servicios"
          maxlength="200"
        />
        <p *ngIf="hasError('subject')" class="error-text">
          ‚ö† {{ getErrorMessage('subject') }}
        </p>
      </div>

      <!-- Mensaje -->
      <div class="form-group">
        <label for="message" class="label">Mensaje *</label>
        <textarea
          id="message"
          formControlName="message"
          [class]="getFieldClass('message')"
          placeholder="Escribe tu mensaje aqu√≠..."
          rows="5"
          maxlength="1000"
        ></textarea>
        <div class="char-counter">
          <p *ngIf="hasError('message')" class="error-text">
            ‚ö† {{ getErrorMessage('message') }}
          </p>
          <span *ngIf="!hasError('message')" class="char-count">
            {{ getCharCount() }}
          </span>
        </div>
      </div>

      <!-- reCAPTCHA -->
      <div class="recaptcha-wrapper">
        <div
          class="g-recaptcha"
          [attr.data-sitekey]="recaptchaSiteKey"
          data-callback="onRecaptchaSuccess"
          data-expired-callback="onRecaptchaExpired"
        ></div>
        <p *ngIf="recaptchaError" class="error-text center">
          ‚ö† {{ recaptchaError }}
        </p>
        <p class="recaptcha-note">Protegido por reCAPTCHA v2</p>
      </div>

      <!-- Bot√≥n de env√≠o -->
      <button
        type="button"
        (click)="onSubmit()"
        [disabled]="isSubmitting"
        class="submit-btn"
        [class.loading]="isSubmitting"
      >
        <span *ngIf="isSubmitting" class="spinner">‚è≥</span>
        <span>{{ isSubmitting ? 'Enviando...' : 'Enviar Formulario' }}</span>
      </button>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>üîí Tus datos est√°n protegidos y ser√°n tratados de forma confidencial</p>
    </div>
  </div>
</div>
